#   Практическое задание по теме “NoSQL”
#   Задание №1. В базе данных Redis подберите коллекцию для подсчета посещений с определенных IP-адресов.
#
#   Установка и первоначальная настройка Redis DB
#
root@uworkstation:~# add-apt-repository ppa:redislabs/redis             # Добавляем репозитарий Redis
root@uworkstation:~# apt-get update                                     # Обновляем репозитарии
root@uworkstation:~# apt-get install redis                              # Устанавливаем сервер Redis DB
root@uworkstation:~# vi /etc/redis/redis.conf                           # Изменяем настройки сервера Redis DB
bind 0.0.0.0                                                            # Запускаем сервер Redis DB на всех сетевых интерфейсах
root@uworkstation:~# systemctl stop redis-server.service                # Перезапускаем сервер Redis DB
root@uworkstation:~# systemctl start redis-server.service               #


# Запускаем клиент redis-cli
# Добавляем список с данными IP-адресов
# Проверяем содержимое
root@uworkstation:~# redis-cli
127.0.0.1:6379>
127.0.0.1:6379>
127.0.0.1:6379> LPUSH ip 10.2.1.2 10.2.1.3 10.2.1.4 10.2.1.2 10.2.1.5  10.2.1.2 10.2.1.3 10.2.1.4 10.2.1.2 10.2.1.5  10.2.1.1 10.2.1.8 10.2.1.7
(integer) 13
127.0.0.1:6379> LLEN ip
(integer) 13
127.0.0.1:6379> LRANGE ip 0 12
 1) "10.2.1.7"
 2) "10.2.1.8"
 3) "10.2.1.1"
 4) "10.2.1.5"
 5) "10.2.1.2"
 6) "10.2.1.4"
 7) "10.2.1.3"
 8) "10.2.1.2"
 9) "10.2.1.5"
10) "10.2.1.2"
11) "10.2.1.4"
12) "10.2.1.3"
13) "10.2.1.2"
127.0.0.1:6379>
#
# Задание №1. Реализовано с помощью Python см. redisdb.py
#

#
# Задание №2. При помощи базы данных Redis решите задачу поиска имени пользователя по электронному адресу и наоборот,
# поиск электронного адреса пользователя по его имени.
#
# !!! Нечего лучшего не придумал как хранить пары user:email и наоборот email:user !!! получение поисковых значений с помощью get
#
127.0.0.1:6379[1]>
127.0.0.1:6379[1]> MSET  "user1"  "user1@example.com"  "user2"  "user2@example.com"  "user3"  "user3@example.com"  "user4"  "user4@example.com"
OK
127.0.0.1:6379[1]> MSET  "user1@example.com" "user1"   "user2@example.com" "user2"    "user3@example.com" "user3"  "user4@example.com" "user4"
OK
127.0.0.1:6379[1]>
127.0.0.1:6379[1]> keys *
1) "user3@example.com"
2) "user2@example.com"
3) "user4"
4) "user4@example.com"
5) "user3"
6) "user1"
7) "user1@example.com"
8) "user2"
127.0.0.1:6379[1]>
127.0.0.1:6379[1]> get user2
"user2@example.com"
127.0.0.1:6379[1]> get "user3@example.com"
"user3"
127.0.0.1:6379[1]>
